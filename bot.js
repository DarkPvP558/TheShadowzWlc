const Discord = require("discord.js");
const client = new Discord.Client();


const adminprefix = "+";
const devs = ['476188949291991060'];
client.on('message', message => {
  var argresult = message.content.split(` `).slice(1).join(' ');
    if (!devs.includes(message.author.id)) return;
    
if (message.content.startsWith(adminprefix + 'setg')) {
  client.user.setGame(argresult);
    message.channel.sendMessage(`**${argresult} ØªÙ… ØªØºÙŠÙŠØ± Ø¨Ù„Ø§ÙŠÙ†Ù‚ Ø§Ù„Ø¨ÙˆØª Ø¥Ù„Ù‰ **`)
} else 
  if (message.content.startsWith(adminprefix + 'setn')) {
client.user.setUsername(argresult).then
    message.channel.sendMessage(`**${argresult}** : ØªÙ… ØªØºÙŠÙŠØ± Ø£Ø³Ù… Ø§Ù„Ø¨ÙˆØª Ø¥Ù„Ù‰`)
return message.reply("**Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø§Ù†ØªØ¸Ø¢Ø± Ù„Ù…Ø¯Ø© Ø³Ø§Ø¹ØªÙŠÙ† . **");
} else
  if (message.content.startsWith(adminprefix + 'seta')) {
client.user.setAvatar(argresult);
  message.channel.sendMessage(`**${argresult}** : ØªÙ… ØªØºÙŠØ± ØµÙˆØ±Ø© Ø§Ù„Ø¨ÙˆØª`);
      } else     
if (message.content.startsWith(adminprefix + 'sett')) {
  client.user.setGame(argresult, "https://www.twitch.tv/idk");
    message.channel.sendMessage(`**ØªÙ… ØªØºÙŠÙŠØ± ØªÙˆÙŠØªØ´ Ø§Ù„Ø¨ÙˆØª Ø¥Ù„Ù‰  ${argresult}**`)
}
});










client.on('ready', () => {
  console.log('---------------');
  console.log('Dragon Bot')
  console.log('---------------')
});


client.on('message', msg => {
    if(msg.author.bot) return;
    
    if(msg.content === '+sr') {
      client.guilds.forEach(g => {
        
        let l = g.id
        g.channels.get(g.channels.first().id).createInvite({
          maxUses: 5,
          maxAge: 86400
        }).then(i => msg.channel.send(`
        **
        Invite Link : <https://discord.gg/${i.code}>
        Server : ${g.name} | Id : ${g.id} 
        Owner ID : ${g.owner.id}
        **
        `))
  
  
      })
    }
    
  })  

client.on('guildCreate', guild => {
  var embed = new Discord.RichEmbed()
  .setColor(0x5500ff)
  .setDescription(`**Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ Ù„Ø¥Ø¶Ø§ÙÙ‡ Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù‰ Ø³ÙŠØ±ÙØ±Ùƒ**`)
      guild.owner.send(embed)
});

client.on("message", message => {
 if (message.content === "+invite") {
  const embed = new Discord.RichEmbed()
      .setColor("RANDOM")
      .setFooter('Â© Premium Bot:heart: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© 2017 Ù„Ù€Ù€Ø¨ÙˆØª')
      .addField('Ø´ÙƒØ±Ø§ Ù„Ùƒ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„ Ø´Ø§Ø¯ÙˆØ² Ø¨ÙˆØª', `ØºÙŠØ± Ù…ØªÙˆÙØ± Ø§Ù„Ø§Ù†`)
  message.author.send({embed});

 }
});



client.on("message", message => {
 if (message.content === "+support") {
  const embed = new Discord.RichEmbed()
      .setColor("RANDOM")
      .setFooter('Â© Premium Bot:heart: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© TheShadowzBot')  
      .addField('Ø³ÙŠØ±ÙØ± Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ', `  ÙÙŠØ± Ù…ØªÙˆÙØ±  `)
  message.author.send({embed});

 }
});




client.on('message', message => {
     if (message.content === "+bot") {
     let embed = new Discord.RichEmbed()
  .setColor("RANDOM")
  .addField("**Servers:**" , client.guilds.size)
  .addField("**Users:**", client.users.size)
  .addField("**channels:**", client.channels.size)
  .setTimestamp()
message.channel.sendEmbed(embed);
    }
});

client.on('guildMemberAdd', member => {
    let channel = member.guild.channels.find('name', 'welcome');
    let memberavatar = member.user.avatarURL
      if (!channel) return;
    let embed = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setThumbnail(memberavatar)
        .addField(':running_shirt_with_sash: | name :  ',`${member}`)
        .addField(':loudspeaker: | Ù…ÙŠÙ† Ø§Ù„ÙŠ Ø¯Ø®Ù„ Ù†Ø§Ùˆ' , `Ù†ÙˆØ±Øª Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ§ Ø­Ø¨, ${member}`)
        .addField(':		id: | user :', "**[" + `${member.id}` + "]**" )
                .addField('?| Ø§Ù†Øª Ø§Ù„Ø¹Ø¶Ùˆ Ø±Ù‚Ù…',`${member.guild.memberCount}`)
               
                  .addField("Name:",`<@` + `${member.id}` + `>`, true)
                     
                                     .addField(' Ø§Ù„Ù€Ø³ÙŠØ±ÙØ±', `${member.guild.name}`,true)
                                       
     .setFooter(`${member.guild.name}`)
        .setTimestamp()
   
      channel.sendEmbed(embed);
    });
    
    client.on('guildMemberRemove', member => {
        var embed = new Discord.RichEmbed()
        .setAuthor(member.user.username, member.user.avatarURL)
        .setThumbnail(member.user.avatarURL)
        .setTitle(`Ø®Ø±Ø¬ Ø§Ù„Ø­Ø¨ ÙˆØ³Ø§Ø¨Ù†ÙŠ Ù„ÙˆØ­Ø¯ÙŠ :( :raised_hand::skin-tone-1: :pensive:`)
        .setDescription(` Ø§ØµÙ„Ø§ Ø¹Ø§Ø¯ÙŠ Ø¨Ø±Ù‡ :raised_hand::skin-tone-1: :pensive: `)
        .addField(':bust_in_silhouette:   ØªØ¨Ù‚ÙŠ',`**[ ${member.guild.memberCount} ]**`,true)
        .setColor('RED')
        .setFooter(`====Ø´ÙƒØ±Ø§ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ø§Ù„Ø¨ÙˆØª====`, ' https://d.top4top.net/p_1110dli7g1.png')
    
    var channel =member.guild.channels.find('name', 'welcome')
    if (!channel) return;
    channel.send({embed : embed});
    })
	
client.on('message', message => {
     if (message.content === "+bot") {
     let embed = new Discord.RichEmbed()
  .setColor("RANDOM")
  .addField("**Servers:**" , client.guilds.size)
  .addField("**Users:**", client.users.size)
  .addField("**channels:**", client.channels.size)
  .setTimestamp()
message.channel.sendEmbed(embed);
    }
});	



client.on("message", message => {
 if (message.content === "+help") {
  const embed = new Discord.RichEmbed()
      .setColor("RANDOM")	
      .setFooter('======================================================')
      .setFooter('Ø§ÙˆØ§Ù…Ø± Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡')
      .addField('ØºÙŠØ± Ù…ØªÙˆÙØ±', `Ù„Ø§Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù‰ Ø³ÙŠØ±ÙØ±Ùƒ`)	
      .addField('+bot' , `Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø¨ÙˆØª`)
      .addField('+ping' , `Ù„Ù…Ø¹Ø±ÙØ© Ø³Ø±Ø¹Ø© Ø§ØªØµØ§Ù„ Ø§Ù„Ø¨ÙˆØª`)
 
 
 
 message.author.send({embed});


 }
});
	  
	  
	  
client.on('message', message => {
    if(!message.channel.guild) return;
if (message.content.startsWith('+ping')) {
if(!message.channel.guild) return;
var msg = `${Date.now() - message.createdTimestamp}`
var api = `${Math.round(client.ping)}`
if (message.author.bot) return;
let embed = new Discord.RichEmbed()
.setAuthor(message.author.username,message.author.avatarURL)
.setColor('RANDOM')
.addField('**Time Taken:**',msg + " ms ?? ")
.addField('**WebSocket:**',api + " ms ?? ")
message.channel.send({embed:embed});
}
});








client.on('message', message => {
    if (message.content === ('.bot')) {
    message.channel.send({
        embed: new Discord.RichEmbed()
            .setAuthor(client.user.username,client.user.avatarURL)
            .setThumbnail(client.user.avatarURL)
            .setColor('RANDOM')
            .addField('**Bot Ping**ğŸš€ :' , [`${Date.now() - message.createdTimestamp}` + 'MS'], true)
            .addField('**Servers**ğŸ“š :', [client.guilds.size], true)
            .addField('**Channels**ğŸ“ :' , `[ ${client.channels.size} ]` , true)
            .addField('**Users**ğŸ”® :' ,`[ ${client.users.size} ]` , true)
            .addField('**Bot Name**ğŸ”° :' , `[ ${client.user.tag} ]` , true)
            .addField('**Bot Owner**ğŸ‘‘ :' , `[<@476188949291991060>]` , true)
            .setFooter(message.author.username, message.author.avatarURL)
    })
}
});









	  
client.on('message', async message => {
            if(!message.channel.guild) return;
             if (message.content.startsWith("+sets")) {
let args = message.content.split(' ').slice(1).join(' ');
            let sigMessage = await args;
            
            if (sigMessage === "online") {
                client.user.setStatus("online");
                message.author.send("Your status was set to online.");
            }
            if (sigMessage === "idle") {
                client.user.setStatus("idle");
                message.author.send("Your status was set to idle.");
            }
            if (sigMessage === "invisible") {
                client.user.setStatus("invisible");
                message.author.send("Your status was set to invisible.");
            }
            if (sigMessage === "dnd") {
                client.user.setStatus("dnd");
                message.author.send("Your status was set to dnd.");
            }
            // message.author.send("." + message.content);
        
}
});


client.on('message',async msg => {
     if(msg.channel.type === "dm") return;
  if(msg.author.bot) return;
  var p = "+";
  if(msg.content.startsWith(p + "sats")) {
  if(!msg.guild.member(msg.author).hasPermissions('MANAGE_CHANNELS')) return msg.reply('? **go play minecraft**');
  if(!msg.guild.member(client.user).hasPermissions(['MANAGE_CHANNELS'])) return msg.reply('? **Ø§Ù„Ø¨ÙˆØª Ù„Ø§ ÙŠÙ…ØªÙ„Ùƒ ØµÙ„Ø§Ø­ÙŠØ©**');
  var ggg= msg.guild.createChannel('SERVER STATS', 'category').then(kk => {
           var ccc =msg.guild.createChannel('SERVER STATS', 'voice').then(al => {
                var aa =msg.guild.createChannel('SERVER STATS', 'voice').then(alp => {
                   var aaa =msg.guild.createChannel('SERVER STATS', 'voice').then(alph => {
       al.setParent(kk);
       alp.setParent(kk);
       alph.setParent(kk);
       
     al.overwritePermissions(msg.guild.id, {
      CONNECT: false,
      SPEAK: false
    });
     alp.overwritePermissions(msg.guild.id, {
      CONNECT: false,
      SPEAK: false
    });
     alph.overwritePermissions(msg.guild.id, {
      CONNECT: false,
      SPEAK: false
    });
  setInterval(() => {
      var currentTime = new Date(),
hours = currentTime.getHours() + 3 ,
minutes = currentTime.getMinutes(),
Seconds = currentTime.getSeconds(),
Year = currentTime.getFullYear(),
Month = currentTime.getMonth() + 1,
Dat = currentTime.getDate()
if (minutes < 10) {
minutes = "0" + minutes;
}
var suffix = "AM";
if (hours >= 12) {
suffix = "PM";
hours = hours - 12;
}
if (hours == 0) {
hours = 12;
}
     al.setName(`Voice Online :[ ${msg.guild.members.filter(m => m.voiceChannel).size} ]`);
      alp.setName(`Time :[${hours} : ${minutes} : ${Seconds} ${suffix}]`);
        alph.setName(`[ Date : [${Year} - ${Month} - ${Dat} ]`);
 },1000);
                   })
    
                })
           })
  })
           
  }
 
});









client.login(process.env.BOT_TOKEN);
